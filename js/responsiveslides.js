!function(D,O,W){D.fn.responsiveSlides=function(F){var M=D.extend({auto:!0,speed:500,timeout:4e3,pager:!1,nav:!1,random:!1,pause:!1,pauseControls:!0,prevText:"Previous",nextText:"Next",maxwidth:"",navContainer:"",manualControls:"",namespace:"rslides",before:D.noop,after:D.noop},F);return this.each(function(){W++;var e,o,t,i,n,a,s=D(this),r=0,l=s.children(),u=l.length,c=parseFloat(M.speed),f=parseFloat(M.timeout),d=parseFloat(M.maxwidth),p=M.namespace,h=p+W,v=p+"_nav "+h+"_nav",m=p+"_here",C=h+"_on",x=h+"_s",b=D("<ul class='"+p+"_tabs "+h+"_tabs' />"),y={float:"left",position:"relative",opacity:1,zIndex:2},g={float:"none",position:"absolute",opacity:0,zIndex:1},w=function(){var t,n=(document.body||document.documentElement).style,a="transition";if("string"==typeof n[a])return!0;for(e=["Moz","Webkit","Khtml","O","ms"],a=a.charAt(0).toUpperCase()+a.substr(1),t=0;t<e.length;t++)if("string"==typeof n[e[t]+a])return!0;return!1}(),_=function(t){M.before(t),w?(l.removeClass(C).css(g).eq(t).addClass(C).css(y),r=t,setTimeout(function(){M.after(t)},c)):l.stop().fadeOut(c,function(){D(this).removeClass(C).css(g).css("opacity",1)}).eq(t).fadeIn(c,function(){D(this).addClass(C).css(y),M.after(t),r=t})};if(M.random&&(l.sort(function(){return Math.round(Math.random())-.5}),s.empty().append(l)),l.each(function(t){this.id=x+t}),s.addClass(p+" "+h),F&&F.maxwidth&&s.css("max-width",d),l.hide().css(g).eq(0).addClass(C).css(y).show(),w&&l.show().css({"-webkit-transition":"opacity "+c+"ms ease-in-out","-moz-transition":"opacity "+c+"ms ease-in-out","-o-transition":"opacity "+c+"ms ease-in-out",transition:"opacity "+c+"ms ease-in-out"}),1<l.length){if(f<c+100)return;if(M.pager&&!M.manualControls){var I=[];l.each(function(t){var n=t+1;I+="<li><a href='#' class='"+x+n+"'>"+n+"</a></li>"}),b.append(I),F.navContainer?D(M.navContainer).append(b):s.after(b)}if(M.manualControls&&(b=D(M.manualControls)).addClass(p+"_tabs "+h+"_tabs"),(M.pager||M.manualControls)&&b.find("li").each(function(t){D(this).addClass(x+(t+1))}),(M.pager||M.manualControls)&&(a=b.find("a"),o=function(t){a.closest("li").removeClass(m).eq(t).addClass(m)}),M.auto&&(t=function(){n=setInterval(function(){l.stop(!0,!0);var t=r+1<u?r+1:0;(M.pager||M.manualControls)&&o(t),_(t)},f)})(),i=function(){M.auto&&(clearInterval(n),t())},M.pause&&s.hover(function(){clearInterval(n)},function(){i()}),(M.pager||M.manualControls)&&(a.bind("click",function(t){t.preventDefault(),M.pauseControls||i();var n=a.index(this);r===n||D("."+C).queue("fx").length||(o(n),_(n))}).eq(0).closest("li").addClass(m),M.pauseControls&&a.hover(function(){clearInterval(n)},function(){i()})),M.nav){var q="<a href='#' class='"+v+" prev'>"+M.prevText+"</a><a href='#' class='"+v+" next'>"+M.nextText+"</a>";F.navContainer?D(M.navContainer).append(q):s.after(q);var z=D("."+h+"_nav"),T=z.filter(".prev");z.bind("click",function(t){t.preventDefault();var n=D("."+C);if(!n.queue("fx").length){var a=l.index(n),e=a-1,s=a+1<u?r+1:0;_(D(this)[0]===T[0]?e:s),(M.pager||M.manualControls)&&o(D(this)[0]===T[0]?e:s),M.pauseControls||i()}}),M.pauseControls&&z.hover(function(){clearInterval(n)},function(){i()})}}if(void 0===document.body.style.maxWidth&&F.maxwidth){var k=function(){s.css("width","100%"),s.width()>d&&s.css("width",d)};k(),D(O).bind("resize",function(){k()})}})}}(jQuery,this,0);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbInJlc3BvbnNpdmVzbGlkZXMuanMiXSwibmFtZXMiOlsiJCIsIndpbmRvdyIsImkiLCJmbiIsInJlc3BvbnNpdmVTbGlkZXMiLCJvcHRpb25zIiwic2V0dGluZ3MiLCJleHRlbmQiLCJhdXRvIiwic3BlZWQiLCJ0aW1lb3V0IiwicGFnZXIiLCJuYXYiLCJyYW5kb20iLCJwYXVzZSIsInBhdXNlQ29udHJvbHMiLCJwcmV2VGV4dCIsIm5leHRUZXh0IiwibWF4d2lkdGgiLCJuYXZDb250YWluZXIiLCJtYW51YWxDb250cm9scyIsIm5hbWVzcGFjZSIsImJlZm9yZSIsIm5vb3AiLCJhZnRlciIsInRoaXMiLCJlYWNoIiwidmVuZG9yIiwic2VsZWN0VGFiIiwic3RhcnRDeWNsZSIsInJlc3RhcnRDeWNsZSIsInJvdGF0ZSIsIiR0YWJzIiwiJHRoaXMiLCJpbmRleCIsIiRzbGlkZSIsImNoaWxkcmVuIiwibGVuZ3RoIiwiZmFkZVRpbWUiLCJwYXJzZUZsb2F0Iiwid2FpdFRpbWUiLCJtYXh3IiwibmFtZXNwYWNlSWR4IiwibmF2Q2xhc3MiLCJhY3RpdmVDbGFzcyIsInZpc2libGVDbGFzcyIsInNsaWRlQ2xhc3NQcmVmaXgiLCIkcGFnZXIiLCJ2aXNpYmxlIiwiZmxvYXQiLCJwb3NpdGlvbiIsIm9wYWNpdHkiLCJ6SW5kZXgiLCJoaWRkZW4iLCJzdXBwb3J0c1RyYW5zaXRpb25zIiwic3R5bGVzIiwiZG9jdW1lbnQiLCJib2R5IiwiZG9jdW1lbnRFbGVtZW50Iiwic3R5bGUiLCJwcm9wIiwiY2hhckF0IiwidG9VcHBlckNhc2UiLCJzdWJzdHIiLCJzbGlkZVRvIiwiaWR4IiwicmVtb3ZlQ2xhc3MiLCJjc3MiLCJlcSIsImFkZENsYXNzIiwic2V0VGltZW91dCIsInN0b3AiLCJmYWRlT3V0IiwiZmFkZUluIiwic29ydCIsIk1hdGgiLCJyb3VuZCIsImVtcHR5IiwiYXBwZW5kIiwiaWQiLCJoaWRlIiwic2hvdyIsIi13ZWJraXQtdHJhbnNpdGlvbiIsIi1tb3otdHJhbnNpdGlvbiIsIi1vLXRyYW5zaXRpb24iLCJ0cmFuc2l0aW9uIiwidGFiTWFya3VwIiwibiIsImZpbmQiLCJjbG9zZXN0Iiwic2V0SW50ZXJ2YWwiLCJjbGVhckludGVydmFsIiwiaG92ZXIiLCJiaW5kIiwiZSIsInByZXZlbnREZWZhdWx0IiwicXVldWUiLCJuYXZNYXJrdXAiLCIkdHJpZ2dlciIsIiRwcmV2IiwiZmlsdGVyIiwiJHZpc2libGVDbGFzcyIsInByZXZJZHgiLCJuZXh0SWR4IiwibWF4V2lkdGgiLCJ3aWR0aFN1cHBvcnQiLCJ3aWR0aCIsImpRdWVyeSJdLCJtYXBwaW5ncyI6IkNBVUEsU0FBV0EsRUFBR0MsRUFBUUMsR0FDcEJGLEVBQUVHLEdBQUdDLGlCQUFtQixTQUFVQyxHQUdoQyxJQUFJQyxFQUFXTixFQUFFTyxRQUNmQyxNQUFBQSxFQUNBQyxNQUFTLElBQ1RDLFFBQVcsSUFDWEMsT0FBQUEsRUFDQUMsS0FBQUEsRUFDQUMsUUFBQUEsRUFDQUMsT0FBQUEsRUFDQUMsZUFBQUEsRUFDQUMsU0FBWSxXQUNaQyxTQUFZLE9BQ1pDLFNBQVksR0FDWkMsYUFBZ0IsR0FDaEJDLGVBQWtCLEdBQ2xCQyxVQUFhLFVBQ2JDLE9BQVV0QixFQUFFdUIsS0FDWkMsTUFBU3hCLEVBQUV1QixNQUNWbEIsR0FFSCxPQUFPb0IsS0FBS0MsS0FBSyxXQUdmeEIsSUFFQSxJQUdFeUIsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFDQUMsRUFSRUMsRUFBUWpDLEVBQUV5QixNQVdaUyxFQUFRLEVBQ1JDLEVBQVNGLEVBQU1HLFdBQ2ZDLEVBQVNGLEVBQU9FLE9BQ2hCQyxFQUFXQyxXQUFXakMsRUFBU0csT0FDL0IrQixFQUFXRCxXQUFXakMsRUFBU0ksU0FDL0IrQixFQUFPRixXQUFXakMsRUFBU1ksVUFHM0JHLEVBQVlmLEVBQVNlLFVBQ3JCcUIsRUFBZXJCLEVBQVluQixFQUczQnlDLEVBQVd0QixFQUFZLFFBQVVxQixFQUFlLE9BQ2hERSxFQUFjdkIsRUFBWSxRQUMxQndCLEVBQWVILEVBQWUsTUFD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U0FBVUMsR0FDL0JBLEVBQUVDLGlCQUVGLElBQUlNLEVBQWdCckcsRUFBRSxJQUFNNkMsR0FHNUIsSUFBSXdELEVBQWNMLE1BQU0sTUFBTTNELE9BQTlCLENBY0EsSUFBSTRCLEVBQU05QixFQUFPRCxNQUFNbUUsR0FDckJDLEVBQVVyQyxFQUFNLEVBQ2hCc0MsRUFBVXRDLEVBQU0sRUFBSTVCLEVBQVNILEVBQVEsRUFBSSxFQUczQzhCLEVBQVFoRSxFQUFFeUIsTUFBTSxLQUFPMEUsRUFBTSxHQUFLRyxFQUFVQyxJQUN4Q2pHLEVBQVNLLE9BQVNMLEVBQVNjLGlCQUM3QlEsRUFBVTVCLEVBQUV5QixNQUFNLEtBQU8wRSxFQUFNLEdBQUtHLEVBQVVDLEdBRzNDakcsRUFBU1MsZUFDWmUsT0FLQXhCLEVBQVNTLGVBQ1htRixFQUFTTixNQUFNLFdBQ2JELGNBQWM1RCxJQUNiLFdBQ0RELE9BUVIsUUFBQSxJQUFXMEIsU0FBU0MsS0FBS0UsTUFBTTZDLFVBQTRCbkcsRUFBUWEsU0FBVSxDQUMzRSxJQUFJdUYsRUFBZSxXQUNqQnhFLEVBQU1rQyxJQUFJLFFBQVMsUUFDZmxDLEVBQU15RSxRQUFVakUsR0FDbEJSLEVBQU1rQyxJQUFJLFFBQVMxQixJQUt2QmdFLElBQ0F6RyxFQUFFQyxHQUFRNEYsS0FBSyxTQUFVLFdBQ3ZCWSxVQXJYVixDQTRYR0UsT0FBUWxGLEtBQU0iLCJmaWxlIjoicmVzcG9uc2l2ZXNsaWRlcy5qcyIsInNvdXJjZXNDb250ZW50IjpbIi8qISBSZXNwb25zaXZlU2xpZGVzLmpzIHYxLjU1XG4gKiBodHRwOi8vcmVzcG9uc2l2ZXNsaWRlcy5jb21cbiAqIGh0dHA6Ly92aWxqYW1pcy5jb21cbiAqXG4gKiBDb3B5cmlnaHQgKGMpIDIwMTEtMjAxMiBAdmlsamFtaXNcbiAqIEF2YWlsYWJsZSB1bmRlciB0aGUgTUlUIGxpY2Vuc2VcbiAqL1xuXG4vKmpzbGludCBicm93c2VyOiB0cnVlLCBzbG9wcHk6IHRydWUsIHZhcnM6IHRydWUsIHBsdXNwbHVzOiB0cnVlLCBpbmRlbnQ6IDIgKi9cblxuKGZ1bmN0aW9uICgkLCB3aW5kb3csIGkpIHtcbiAgJC5mbi5yZXNwb25zaXZlU2xpZGVzID0gZnVuY3Rpb24gKG9wdGlvbnMpIHtcblxuICAgIC8vIERlZmF1bHQgc2V0dGluZ3NcbiAgICB2YXIgc2V0dGluZ3MgPSAkLmV4dGVuZCh7XG4gICAgICBcImF1dG9cIjogdHJ1ZSwgICAgICAgICAgICAgLy8gQm9vbGVhbjogQW5pbWF0ZSBhdXRvbWF0aWNhbGx5LCB0cnVlIG9yIGZhbHNlXG4gICAgICBcInNwZWVkXCI6IDUwMCwgICAgICAgICAgICAgLy8gSW50ZWdlcjogU3BlZWQgb2YgdGhlIHRyYW5zaXRpb24sIGluIG1pbGxpc2Vjb25kc1xuICAgICAgXCJ0aW1lb3V0XCI6IDQwMDAsICAgICAgICAgIC8vIEludGVnZXI6IFRpbWUgYmV0d2VlbiBzbGlkZSB0cmFuc2l0aW9ucywgaW4gbWlsbGlzZWNvbmRzXG4gICAgICBcInBhZ2VyXCI6IGZhbHNlLCAgICAgICAgICAgLy8gQm9vbGVhbjogU2hvdyBwYWdlciwgdHJ1ZSBvciBmYWxzZVxuICAgICAgXCJuYXZcIjogZmFsc2UsICAgICAgICAgICAgIC8vIEJvb2xlYW46IFNob3cgbmF2aWdhdGlvbiwgdHJ1ZSBvciBmYWxzZVxuICAgICAgXCJyYW5kb21cIjogZmFsc2UsICAgICAgICAgIC8vIEJvb2xlYW46IFJhbmRvbWl6ZSB0aGUgb3JkZXIgb2YgdGhlIHNsaWRlcywgdHJ1ZSBvciBmYWxzZVxuICAgICAgXCJwYXVzZVwiOiBmYWxzZSwgICAgICAgICAgIC8vIEJvb2xlYW46IFBhdXNlIG9uIGhvdmVyLCB0cnVlIG9yIGZhbHNlXG4gICAgICBcInBhdXNlQ29udHJvbHNcIjogdHJ1ZSwgICAgLy8gQm9vbGVhbjogUGF1c2Ugd2hlbiBob3ZlcmluZyBjb250cm9scywgdHJ1ZSBvciBmYWxzZVxuICAgICAgXCJwcmV2VGV4dFwiOiBcIlByZXZpb3VzXCIsICAgLy8gU3RyaW5nOiBUZXh0IGZvciB0aGUgXCJwcmV2aW91c1wiIGJ1dHRvblxuICAgICAgXCJuZXh0VGV4dFwiOiBcIk5leHRcIiwgICAgICAgLy8gU3RyaW5nOiBUZXh0IGZvciB0aGUgXCJuZXh0XCIgYnV0dG9uXG4gICAgICBcIm1heHdpZHRoXCI6IFwiXCIsICAgICAgICAgICAvLyBJbnRlZ2VyOiBNYXgtd2lkdGggb2YgdGhlIHNsaWRlc2hvdywgaW4gcGl4ZWxzXG4gICAgICBcIm5hdkNvbnRhaW5lclwiOiBcIlwiLCAgICAgICAvLyBTZWxlY3RvcjogV2hlcmUgYXV0byBnZW5lcmF0ZWQgY29udHJvbHMgc2hvdWxkIGJlIGFwcGVuZGVkIHRvLCBkZWZhdWx0IGlzIGFmdGVyIHRoZSA8dWw+XG4gICAgICBcIm1hbnVhbENvbnRyb2xzXCI6IFwiXCIsICAgICAvLyBTZWxlY3RvcjogRGVjbGFyZSBjdXN0b20gcGFnZXIgbmF2aWdhdGlvblxuICAgICAgXCJuYW1lc3BhY2VcIjogXCJyc2xpZGVzXCIsICAgLy8gU3RyaW5nOiBjaGFuZ2UgdGhlIGRlZmF1bHQgbmFtZXNwYWNlIHVzZWRcbiAgICAgIFwiYmVmb3JlXCI6ICQubm9vcCwgICAgICAgICAvLyBGdW5jdGlvbjogQmVmb3JlIGNhbGxiYWNrXG4gICAgICBcImFmdGVyXCI6ICQubm9vcCAgICAgICAgICAgLy8gRnVuY3Rpb246IEFmdGVyIGNhbGxiYWNrXG4gICAgfSwgb3B0aW9ucyk7XG5cbiAgICByZXR1cm4gdGhpcy5lYWNoKGZ1bmN0aW9uICgpIHtcblxuICAgICAgLy8gSW5kZXggZm9yIG5hbWVzcGFjaW5nXG4gICAgICBpKys7XG5cbiAgICAgIHZhciAkdGhpcyA9ICQodGhpcyksXG5cbiAgICAgICAgLy8gTG9jYWwgdmFyaWFibGVzXG4gICAgICAgIHZlbmRvcixcbiAgICAgICAgc2VsZWN0VGFiLFxuICAgICAgICBzdGFydEN5Y2xlLFxuICAgICAgICByZXN0YXJ0Q3ljbGUsXG4gICAgICAgIHJvdGF0ZSxcbiAgICAgICAgJHRhYnMsXG5cbiAgICAgICAgLy8gSGVscGVyc1xuICAgICAgICBpbmRleCA9IDAsXG4gICAgICAgICRzbGlkZSA9ICR0aGlzLmNoaWxkcmVuKCksXG4gICAgICAgIGxlbmd0aCA9ICRzbGlkZS5sZW5ndGgsXG4gICAgICAgIGZhZGVUaW1lID0gcGFyc2VGbG9hdChzZXR0aW5ncy5zcGVlZCksXG4gICAgICAgIHdhaXRUaW1lID0gcGFyc2VGbG9hdChzZXR0aW5ncy50aW1lb3V0KSxcbiAgICAgICAgbWF4dyA9IHBhcnNlRmxvYXQoc2V0dGluZ3MubWF4d2lkdGgpLFxuXG4gICAgICAgIC8vIE5hbWVzcGFjaW5nXG4gICAgICAgIG5hbWVzcGFjZSA9IHNldHRpbmdzLm5hbWVzcGFjZSxcbiAgICAgICAgbmFtZXNwYWNlSWR4ID0gbmFtZXNwYWNlICsgaSxcblxuICAgICAgICAvLyBDbGFzc2VzXG4gICAgICAgIG5hdkNsYXNzID0gbmFtZXNwYWNlICsgXCJfbmF2IFwiICsgbmFtZXNwYWNlSWR4ICsgXCJfbmF2XCIsXG4gICAgICAgIGFjdGl2ZUNsYXNzID0gbmFtZXNwYWNlICsgXCJfaGVyZVwiLFxuICAgICAgICB2aXNpYmxlQ2xhc3MgPSBuYW1lc3BhY2VJZHggKyBcIl9vblwiLFxuICAgICAgICBzbGlkZUNsYXNzUHJlZml4ID0gbmFtZXNwYWNlSWR4ICsgXCJfc1wiLFxuXG4gICAgICAgIC8vIFBhZ2VyXG4gICAgICAgICRwYWdlciA9ICQoXCI8dWwgY2xhc3M9J1wiICsgbmFtZXNwYWNlICsgXCJfdGFicyBcIiArIG5hbWVzcGFjZUlkeCArIFwiX3RhYnMnIC8+XCIpLFxuXG4gICAgICAgIC8vIFN0eWxlcyBmb3IgdmlzaWJsZSBhbmQgaGlkZGVuIHNsaWRlc1xuICAgICAgICB2aXNpYmxlID0ge1wiZmxvYXRcIjogXCJsZWZ0XCIsIFwicG9zaXRpb25cIjogXCJyZWxhdGl2ZVwiLCBcIm9wYWNpdHlcIjogMSwgXCJ6SW5kZXhcIjogMn0sXG4gICAgICAgIGhpZGRlbiA9IHtcImZsb2F0XCI6IFwibm9uZVwiLCBcInBvc2l0aW9uXCI6IFwiYWJzb2x1dGVcIiwgXCJvcGFjaXR5XCI6IDAsIFwiekluZGV4XCI6IDF9LFxuXG4gICAgICAgIC8vIERldGVjdCB0cmFuc2l0aW9uIHN1cHBvcnRcbiAgICAgICAgc3VwcG9ydHNUcmFuc2l0aW9ucyA9IChmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgdmFyIGRvY0JvZHkgPSBkb2N1bWVudC5ib2R5IHx8IGRvY3VtZW50LmRvY3VtZW50RWxlbWVudDtcbiAgICAgICAgICB2YXIgc3R5bGVzID0gZG9jQm9keS5zdHlsZTtcbiAgICAgICAgICB2YXIgcHJvcCA9IFwidHJhbnNpdGlvblwiO1xuICAgICAgICAgIGlmICh0eXBlb2Ygc3R5bGVzW3Byb3BdID09PSBcInN0cmluZ1wiKSB7XG4gICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICB9XG4gICAgICAgICAgLy8gVGVzdHMgZm9yIHZlbmRvciBzcGVjaWZpYyBwcm9wXG4gICAgICAgICAgdmVuZG9yID0gW1wiTW96XCIsIFwiV2Via2l0XCIsIFwiS2h0bWxcIiwgXCJPXCIsIFwibXNcIl07XG4gICAgICAgICAgcHJvcCA9IHByb3AuY2hhckF0KDApLnRvVXBwZXJDYXNlKCkgKyBwcm9wLnN1YnN0cigxKTtcbiAgICAgICAgICB2YXIgaTtcbiAgICAgICAgICBmb3IgKGkgPSAwOyBpIDwgdmVuZG9yLmxlbmd0aDsgaSsrKSB7XG4gICAgICAgICAgICBpZiAodHlwZW9mIHN0eWxlc1t2ZW5kb3JbaV0gKyBwcm9wXSA9PT0gXCJzdHJpbmdcIikge1xuICAgICAgICAgICAgICByZXR1cm4gdHJ1ZTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9XG4gICAgICAgICAgcmV0dXJuIGZhbHNlO1xuICAgICAgICB9KSgpLFxuXG4gICAgICAgIC8vIEZhZGluZyBhbmltYXRpb25cbiAgICAgICAgc2xpZGVUbyA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICBzZXR0aW5ncy5iZWZvcmUoaWR4KTtcbiAgICAgICAgICAvLyBJZiBDU1MzIHRyYW5zaXRpb25zIGFyZSBzdXBwb3J0ZWRcbiAgICAgICAgICBpZiAoc3VwcG9ydHNUcmFuc2l0aW9ucykge1xuICAgICAgICAgICAgJHNsaWRlXG4gICAgICAgICAgICAgIC5yZW1vdmVDbGFzcyh2aXNpYmxlQ2xhc3MpXG4gICAgICAgICAgICAgIC5jc3MoaGlkZGVuKVxuICAgICAgICAgICAgICAuZXEoaWR4KVxuICAgICAgICAgICAgICAuYWRkQ2xhc3ModmlzaWJsZUNsYXNzKVxuICAgICAgICAgICAgICAuY3NzKHZpc2libGUpO1xuICAgICAgICAgICAgaW5kZXggPSBpZHg7XG4gICAgICAgICAgICBzZXRUaW1lb3V0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgc2V0dGluZ3MuYWZ0ZXIoaWR4KTtcbiAgICAgICAgICAgIH0sIGZhZGVUaW1lKTtcbiAgICAgICAgICAvLyBJZiBub3QsIHVzZSBqUXVlcnkgZmFsbGJhY2tcbiAgICAgICAgICB9IGVsc2Uge1xuICAgICAgICAgICAgJHNsaWRlXG4gICAgICAgICAgICAgIC5zdG9wKClcbiAgICAgICAgICAgICAgLmZhZGVPdXQoZmFkZVRpbWUsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgICAkKHRoaXMpXG4gICAgICAgICAgICAgICAgICAucmVtb3ZlQ2xhc3ModmlzaWJsZUNsYXNzKVxuICAgICAgICAgICAgICAgICAgLmNzcyhoaWRkZW4pXG4gICAgICAgICAgICAgICAgICAuY3NzKFwib3BhY2l0eVwiLCAxKTtcbiAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgLmVxKGlkeClcbiAgICAgICAgICAgICAgLmZhZGVJbihmYWRlVGltZSwgZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICAgICQodGhpcylcbiAgICAgICAgICAgICAgICAgIC5hZGRDbGFzcyh2aXNpYmxlQ2xhc3MpXG4gICAgICAgICAgICAgICAgICAuY3NzKHZpc2libGUpO1xuICAgICAgICAgICAgICAgIHNldHRpbmdzLmFmdGVyKGlkeCk7XG4gICAgICAgICAgICAgICAgaW5kZXggPSBpZHg7XG4gICAgICAgICAgICAgIH0pO1xuICAgICAgICAgIH1cbiAgICAgICAgfTtcblxuICAgICAgLy8gUmFuZG9tIG9yZGVyXG4gICAgICBpZiAoc2V0dGluZ3MucmFuZG9tKSB7XG4gICAgICAgICRzbGlkZS5zb3J0KGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICByZXR1cm4gKE1hdGgucm91bmQoTWF0aC5yYW5kb20oKSkgLSAwLjUpO1xuICAgICAgICB9KTtcbiAgICAgICAgJHRoaXNcbiAgICAgICAgICAuZW1wdHkoKVxuICAgICAgICAgIC5hcHBlbmQoJHNsaWRlKTtcbiAgICAgIH1cblxuICAgICAgLy8gQWRkIElEJ3MgdG8gZWFjaCBzbGlkZVxuICAgICAgJHNsaWRlLmVhY2goZnVuY3Rpb24gKGkpIHtcbiAgICAgICAgdGhpcy5pZCA9IHNsaWRlQ2xhc3NQcmVmaXggKyBpO1xuICAgICAgfSk7XG5cbiAgICAgIC8vIEFkZCBtYXgtd2lkdGggYW5kIGNsYXNzZXNcbiAgICAgICR0aGlzLmFkZENsYXNzKG5hbWVzcGFjZSArIFwiIFwiICsgbmFtZXNwYWNlSWR4KTtcbiAgICAgIGlmIChvcHRpb25zICYmIG9wdGlvbnMubWF4d2lkdGgpIHtcbiAgICAgICAgJHRoaXMuY3NzKFwibWF4LXdpZHRoXCIsIG1heHcpO1xuICAgICAgfVxuXG4gICAgICAvLyBIaWRlIGFsbCBzbGlkZXMsIHRoZW4gc2hvdyBmaXJzdCBvbmVcbiAgICAgICRzbGlkZVxuICAgICAgICAuaGlkZSgpXG4gICAgICAgIC5jc3MoaGlkZGVuKVxuICAgICAgICAuZXEoMClcbiAgICAgICAgLmFkZENsYXNzKHZpc2libGVDbGFzcylcbiAgICAgICAgLmNzcyh2aXNpYmxlKVxuICAgICAgICAuc2hvdygpO1xuXG4gICAgICAvLyBDU1MgdHJhbnNpdGlvbnNcbiAgICAgIGlmIChzdXBwb3J0c1RyYW5zaXRpb25zKSB7XG4gICAgICAgICRzbGlkZVxuICAgICAgICAgIC5zaG93KClcbiAgICAgICAgICAuY3NzKHtcbiAgICAgICAgICAgIC8vIC1tcyBwcmVmaXggaXNuJ3QgbmVlZGVkIGFzIElFMTAgdXNlcyBwcmVmaXggZnJlZSB2ZXJzaW9uXG4gICAgICAgICAgICBcIi13ZWJraXQtdHJhbnNpdGlvblwiOiBcIm9wYWNpdHkgXCIgKyBmYWRlVGltZSArIFwibXMgZWFzZS1pbi1vdXRcIixcbiAgICAgICAgICAgIFwiLW1vei10cmFuc2l0aW9uXCI6IFwib3BhY2l0eSBcIiArIGZhZGVUaW1lICsgXCJtcyBlYXNlLWluLW91dFwiLFxuICAgICAgICAgICAgXCItby10cmFuc2l0aW9uXCI6IFwib3BhY2l0eSBcIiArIGZhZGVUaW1lICsgXCJtcyBlYXNlLWluLW91dFwiLFxuICAgICAgICAgICAgXCJ0cmFuc2l0aW9uXCI6IFwib3BhY2l0eSBcIiArIGZhZGVUaW1lICsgXCJtcyBlYXNlLWluLW91dFwiXG4gICAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICAgIC8vIE9ubHkgcnVuIGlmIHRoZXJlJ3MgbW9yZSB0aGFuIG9uZSBzbGlkZVxuICAgICAgaWYgKCRzbGlkZS5sZW5ndGggPiAxKSB7XG5cbiAgICAgICAgLy8gTWFrZSBzdXJlIHRoZSB0aW1lb3V0IGlzIGF0IGxlYXN0IDEwMG1zIGxvbmdlciB0aGFuIHRoZSBmYWRlXG4gICAgICAgIGlmICh3YWl0VGltZSA8IGZhZGVUaW1lICsgMTAwKSB7XG4gICAgICAgICAgcmV0dXJuO1xuICAgICAgICB9XG5cbiAgICAgICAgLy8gUGFnZXJcbiAgICAgICAgaWYgKHNldHRpbmdzLnBhZ2VyICYmICFzZXR0aW5ncy5tYW51YWxDb250cm9scykge1xuICAgICAgICAgIHZhciB0YWJNYXJrdXAgPSBbXTtcbiAgICAgICAgICAkc2xpZGUuZWFjaChmdW5jdGlvbiAoaSkge1xuICAgICAgICAgICAgdmFyIG4gPSBpICsgMTtcbiAgICAgICAgICAgIHRhYk1hcmt1cCArPVxuICAgICAgICAgICAgICBcIjxsaT5cIiArXG4gICAgICAgICAgICAgIFwiPGEgaHJlZj0nIycgY2xhc3M9J1wiICsgc2xpZGVDbGFzc1ByZWZpeCArIG4gKyBcIic+XCIgKyBuICsgXCI8L2E+XCIgK1xuICAgICAgICAgICAgICBcIjwvbGk+XCI7XG4gICAgICAgICAgfSk7XG4gICAgICAgICAgJHBhZ2VyLmFwcGVuZCh0YWJNYXJrdXApO1xuXG4gICAgICAgICAgLy8gSW5qZWN0IHBhZ2VyXG4gICAgICAgICAgaWYgKG9wdGlvbnMubmF2Q29udGFpbmVyKSB7XG4gICAgICAgICAgICAkKHNldHRpbmdzLm5hdkNvbnRhaW5lcikuYXBwZW5kKCRwYWdlcik7XG4gICAgICAgICAgfSBlbHNlIHtcbiAgICAgICAgICAgICR0aGlzLmFmdGVyKCRwYWdlcik7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTWFudWFsIHBhZ2VyIGNvbnRyb2xzXG4gICAgICAgIGlmIChzZXR0aW5ncy5tYW51YWxDb250cm9scykge1xuICAgICAgICAgICRwYWdlciA9ICQoc2V0dGluZ3MubWFudWFsQ29udHJvbHMpO1xuICAgICAgICAgICRwYWdlci5hZGRDbGFzcyhuYW1lc3BhY2UgKyBcIl90YWJzIFwiICsgbmFtZXNwYWNlSWR4ICsgXCJfdGFic1wiKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIEFkZCBwYWdlciBzbGlkZSBjbGFzcyBwcmVmaXhlc1xuICAgICAgICBpZiAoc2V0dGluZ3MucGFnZXIgfHwgc2V0dGluZ3MubWFudWFsQ29udHJvbHMpIHtcbiAgICAgICAgICAkcGFnZXIuZmluZCgnbGknKS5lYWNoKGZ1bmN0aW9uIChpKSB7XG4gICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKHNsaWRlQ2xhc3NQcmVmaXggKyAoaSArIDEpKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIElmIHdlIGhhdmUgYSBwYWdlciwgd2UgbmVlZCB0byBzZXQgdXAgdGhlIHNlbGVjdFRhYiBmdW5jdGlvblxuICAgICAgICBpZiAoc2V0dGluZ3MucGFnZXIgfHwgc2V0dGluZ3MubWFudWFsQ29udHJvbHMpIHtcbiAgICAgICAgICAkdGFicyA9ICRwYWdlci5maW5kKCdhJyk7XG5cbiAgICAgICAgICAvLyBTZWxlY3QgcGFnZXIgaXRlbVxuICAgICAgICAgIHNlbGVjdFRhYiA9IGZ1bmN0aW9uIChpZHgpIHtcbiAgICAgICAgICAgICR0YWJzXG4gICAgICAgICAgICAgIC5jbG9zZXN0KFwibGlcIilcbiAgICAgICAgICAgICAgLnJlbW92ZUNsYXNzKGFjdGl2ZUNsYXNzKVxuICAgICAgICAgICAgICAuZXEoaWR4KVxuICAgICAgICAgICAgICAuYWRkQ2xhc3MoYWN0aXZlQ2xhc3MpO1xuICAgICAgICAgIH07XG4gICAgICAgIH1cblxuICAgICAgICAvLyBBdXRvIGN5Y2xlXG4gICAgICAgIGlmIChzZXR0aW5ncy5hdXRvKSB7XG5cbiAgICAgICAgICBzdGFydEN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgcm90YXRlID0gc2V0SW50ZXJ2YWwoZnVuY3Rpb24gKCkge1xuXG4gICAgICAgICAgICAgIC8vIENsZWFyIHRoZSBldmVudCBxdWV1ZVxuICAgICAgICAgICAgICAkc2xpZGUuc3RvcCh0cnVlLCB0cnVlKTtcblxuICAgICAgICAgICAgICB2YXIgaWR4ID0gaW5kZXggKyAxIDwgbGVuZ3RoID8gaW5kZXggKyAxIDogMDtcblxuICAgICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIHN0YXRlIGFuZCBzZXQgbmV3IGlmIHBhZ2VyIGlzIHNldFxuICAgICAgICAgICAgICBpZiAoc2V0dGluZ3MucGFnZXIgfHwgc2V0dGluZ3MubWFudWFsQ29udHJvbHMpIHtcbiAgICAgICAgICAgICAgICBzZWxlY3RUYWIoaWR4KTtcbiAgICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAgIHNsaWRlVG8oaWR4KTtcbiAgICAgICAgICAgIH0sIHdhaXRUaW1lKTtcbiAgICAgICAgICB9O1xuXG4gICAgICAgICAgLy8gSW5pdCBjeWNsZVxuICAgICAgICAgIHN0YXJ0Q3ljbGUoKTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFJlc3RhcnRpbmcgY3ljbGVcbiAgICAgICAgcmVzdGFydEN5Y2xlID0gZnVuY3Rpb24gKCkge1xuICAgICAgICAgIGlmIChzZXR0aW5ncy5hdXRvKSB7XG4gICAgICAgICAgICAvLyBTdG9wXG4gICAgICAgICAgICBjbGVhckludGVydmFsKHJvdGF0ZSk7XG4gICAgICAgICAgICAvLyBSZXN0YXJ0XG4gICAgICAgICAgICBzdGFydEN5Y2xlKCk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIFBhdXNlIG9uIGhvdmVyXG4gICAgICAgIGlmIChzZXR0aW5ncy5wYXVzZSkge1xuICAgICAgICAgICR0aGlzLmhvdmVyKGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocm90YXRlKTtcbiAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICByZXN0YXJ0Q3ljbGUoKTtcbiAgICAgICAgICB9KTtcbiAgICAgICAgfVxuXG4gICAgICAgIC8vIFBhZ2VyIGNsaWNrIGV2ZW50IGhhbmRsZXJcbiAgICAgICAgaWYgKHNldHRpbmdzLnBhZ2VyIHx8IHNldHRpbmdzLm1hbnVhbENvbnRyb2xzKSB7XG4gICAgICAgICAgJHRhYnMuYmluZChcImNsaWNrXCIsIGZ1bmN0aW9uIChlKSB7XG4gICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XG5cbiAgICAgICAgICAgIGlmICghc2V0dGluZ3MucGF1c2VDb250cm9scykge1xuICAgICAgICAgICAgICByZXN0YXJ0Q3ljbGUoKTtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gR2V0IGluZGV4IG9mIGNsaWNrZWQgdGFiXG4gICAgICAgICAgICB2YXIgaWR4ID0gJHRhYnMuaW5kZXgodGhpcyk7XG5cbiAgICAgICAgICAgIC8vIEJyZWFrIGlmIGVsZW1lbnQgaXMgYWxyZWFkeSBhY3RpdmUgb3IgY3VycmVudGx5IGFuaW1hdGVkXG4gICAgICAgICAgICBpZiAoaW5kZXggPT09IGlkeCB8fCAkKFwiLlwiICsgdmlzaWJsZUNsYXNzKS5xdWV1ZSgnZngnKS5sZW5ndGgpIHtcbiAgICAgICAgICAgICAgcmV0dXJuO1xuICAgICAgICAgICAgfVxuXG4gICAgICAgICAgICAvLyBSZW1vdmUgYWN0aXZlIHN0YXRlIGZyb20gb2xkIHRhYiBhbmQgc2V0IG5ldyBvbmVcbiAgICAgICAgICAgIHNlbGVjdFRhYihpZHgpO1xuXG4gICAgICAgICAgICAvLyBEbyB0aGUgYW5pbWF0aW9uXG4gICAgICAgICAgICBzbGlkZVRvKGlkeCk7XG4gICAgICAgICAgfSlcbiAgICAgICAgICAgIC5lcSgwKVxuICAgICAgICAgICAgLmNsb3Nlc3QoXCJsaVwiKVxuICAgICAgICAgICAgLmFkZENsYXNzKGFjdGl2ZUNsYXNzKTtcblxuICAgICAgICAgIC8vIFBhdXNlIHdoZW4gaG92ZXJpbmcgcGFnZXJcbiAgICAgICAgICBpZiAoc2V0dGluZ3MucGF1c2VDb250cm9scykge1xuICAgICAgICAgICAgJHRhYnMuaG92ZXIoZnVuY3Rpb24gKCkge1xuICAgICAgICAgICAgICBjbGVhckludGVydmFsKHJvdGF0ZSk7XG4gICAgICAgICAgICB9LCBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIHJlc3RhcnRDeWNsZSgpO1xuICAgICAgICAgICAgfSk7XG4gICAgICAgICAgfVxuICAgICAgICB9XG5cbiAgICAgICAgLy8gTmF2aWdhdGlvblxuICAgICAgICBpZiAoc2V0dGluZ3MubmF2KSB7XG4gICAgICAgICAgdmFyIG5hdk1hcmt1cCA9XG4gICAgICAgICAgICBcIjxhIGhyZWY9JyMnIGNsYXNzPSdcIiArIG5hdkNsYXNzICsgXCIgcHJldic+XCIgKyBzZXR0aW5ncy5wcmV2VGV4dCArIFwiPC9hPlwiICtcbiAgICAgICAgICAgIFwiPGEgaHJlZj0nIycgY2xhc3M9J1wiICsgbmF2Q2xhc3MgKyBcIiBuZXh0Jz5cIiArIHNldHRpbmdzLm5leHRUZXh0ICsgXCI8L2E+XCI7XG5cbiAgICAgICAgICAvLyBJbmplY3QgbmF2aWdhdGlvblxuICAgICAgICAgIGlmIChvcHRpb25zLm5hdkNvbnRhaW5lcikge1xuICAgICAgICAgICAgJChzZXR0aW5ncy5uYXZDb250YWluZXIpLmFwcGVuZChuYXZNYXJrdXApO1xuICAgICAgICAgIH0gZWxzZSB7XG4gICAgICAgICAgICAkdGhpcy5hZnRlcihuYXZNYXJrdXApO1xuICAgICAgICAgIH1cblxuICAgICAgICAgIHZhciAkdHJpZ2dlciA9ICQoXCIuXCIgKyBuYW1lc3BhY2VJZHggKyBcIl9uYXZcIiksXG4gICAgICAgICAgICAkcHJldiA9ICR0cmlnZ2VyLmZpbHRlcihcIi5wcmV2XCIpO1xuXG4gICAgICAgICAgLy8gQ2xpY2sgZXZlbnQgaGFuZGxlclxuICAgICAgICAgICR0cmlnZ2VyLmJpbmQoXCJjbGlja1wiLCBmdW5jdGlvbiAoZSkge1xuICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xuXG4gICAgICAgICAgICB2YXIgJHZpc2libGVDbGFzcyA9ICQoXCIuXCIgKyB2aXNpYmxlQ2xhc3MpO1xuXG4gICAgICAgICAgICAvLyBQcmV2ZW50IGNsaWNraW5nIGlmIGN1cnJlbnRseSBhbmltYXRlZFxuICAgICAgICAgICAgaWYgKCR2aXNpYmxlQ2xhc3MucXVldWUoJ2Z4JykubGVuZ3RoKSB7XG4gICAgICAgICAgICAgIHJldHVybjtcbiAgICAgICAgICAgIH1cblxuICAgICAgICAgICAgLy8gIEFkZHMgYWN0aXZlIGNsYXNzIGR1cmluZyBzbGlkZSBhbmltYXRpb25cbiAgICAgICAgICAgIC8vICAkKHRoaXMpXG4gICAgICAgICAgICAvLyAgICAuYWRkQ2xhc3MobmFtZXNwYWNlICsgXCJfYWN0aXZlXCIpXG4gICAgICAgICAgICAvLyAgICAuZGVsYXkoZmFkZVRpbWUpXG4gICAgICAgICAgICAvLyAgICAucXVldWUoZnVuY3Rpb24gKG5leHQpIHtcbiAgICAgICAgICAgIC8vICAgICAgJCh0aGlzKS5yZW1vdmVDbGFzcyhuYW1lc3BhY2UgKyBcIl9hY3RpdmVcIik7XG4gICAgICAgICAgICAvLyAgICAgIG5leHQoKTtcbiAgICAgICAgICAgIC8vICB9KTtcblxuICAgICAgICAgICAgLy8gRGV0ZXJtaW5lIHdoZXJlIHRvIHNsaWRlXG4gICAgICAgICAgICB2YXIgaWR4ID0gJHNsaWRlLmluZGV4KCR2aXNpYmxlQ2xhc3MpLFxuICAgICAgICAgICAgICBwcmV2SWR4ID0gaWR4IC0gMSxcbiAgICAgICAgICAgICAgbmV4dElkeCA9IGlkeCArIDEgPCBsZW5ndGggPyBpbmRleCArIDEgOiAwO1xuXG4gICAgICAgICAgICAvLyBHbyB0byBzbGlkZVxuICAgICAgICAgICAgc2xpZGVUbygkKHRoaXMpWzBdID09PSAkcHJldlswXSA/IHByZXZJZHggOiBuZXh0SWR4KTtcbiAgICAgICAgICAgIGlmIChzZXR0aW5ncy5wYWdlciB8fCBzZXR0aW5ncy5tYW51YWxDb250cm9scykge1xuICAgICAgICAgICAgICBzZWxlY3RUYWIoJCh0aGlzKVswXSA9PT0gJHByZXZbMF0gPyBwcmV2SWR4IDogbmV4dElkeCk7XG4gICAgICAgICAgICB9XG5cbiAgICAgICAgICAgIGlmICghc2V0dGluZ3MucGF1c2VDb250cm9scykge1xuICAgICAgICAgICAgICByZXN0YXJ0Q3ljbGUoKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICB9KTtcblxuICAgICAgICAgIC8vIFBhdXNlIHdoZW4gaG92ZXJpbmcgbmF2aWdhdGlvblxuICAgICAgICAgIGlmIChzZXR0aW5ncy5wYXVzZUNvbnRyb2xzKSB7XG4gICAgICAgICAgICAkdHJpZ2dlci5ob3ZlcihmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgICAgIGNsZWFySW50ZXJ2YWwocm90YXRlKTtcbiAgICAgICAgICAgIH0sIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICAgICAgcmVzdGFydEN5Y2xlKCk7XG4gICAgICAgICAgICB9KTtcbiAgICAgICAgICB9XG4gICAgICAgIH1cblxuICAgICAgfVxuXG4gICAgICAvLyBNYXgtd2lkdGggZmFsbGJhY2tcbiAgICAgIGlmICh0eXBlb2YgZG9jdW1lbnQuYm9keS5zdHlsZS5tYXhXaWR0aCA9PT0gXCJ1bmRlZmluZWRcIiAmJiBvcHRpb25zLm1heHdpZHRoKSB7XG4gICAgICAgIHZhciB3aWR0aFN1cHBvcnQgPSBmdW5jdGlvbiAoKSB7XG4gICAgICAgICAgJHRoaXMuY3NzKFwid2lkdGhcIiwgXCIxMDAlXCIpO1xuICAgICAgICAgIGlmICgkdGhpcy53aWR0aCgpID4gbWF4dykge1xuICAgICAgICAgICAgJHRoaXMuY3NzKFwid2lkdGhcIiwgbWF4dyk7XG4gICAgICAgICAgfVxuICAgICAgICB9O1xuXG4gICAgICAgIC8vIEluaXQgZmFsbGJhY2tcbiAgICAgICAgd2lkdGhTdXBwb3J0KCk7XG4gICAgICAgICQod2luZG93KS5iaW5kKFwicmVzaXplXCIsIGZ1bmN0aW9uICgpIHtcbiAgICAgICAgICB3aWR0aFN1cHBvcnQoKTtcbiAgICAgICAgfSk7XG4gICAgICB9XG5cbiAgICB9KTtcblxuICB9O1xufSkoalF1ZXJ5LCB0aGlzLCAwKTtcbiJdfQ==
